/*! sannico 2016-10-17 */
var app=angular.module("app",["ngRoute","ngMaterial","ngCookies","ngImgCrop"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"homeCtrl"}).when("/nosotros",{templateUrl:"views/nosotros.html",controller:"nosotrosCtrl"}).when("/cronograma",{templateUrl:"views/cronograma.html",controller:"cronogramaCtrl"}).when("/docentes",{templateUrl:"views/docentes.html",controller:"docentesCtrl"}).when("/galeria",{templateUrl:"views/galeria.html",controller:"galeriaCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"loginCtrl"}).when("/evento/:idEvento",{templateUrl:"views/evento.html",controller:"eventoCtrl"}).when("/album/:idAlbum",{templateUrl:"views/album.html",controller:"albumCtrl"}).when("/dashboard/:idUser",{templateUrl:"views/dashboard.html",controller:"dashboardCtrl"}).when("/docentes_adm",{templateUrl:"views/docentes_adm.html",controller:"docentesAdmCtrl"}).when("/perfil_edit/:guid",{templateUrl:"views/perfil_edit.html",controller:"perfilEditCtrl"}).when("/alumnos",{templateUrl:"views/alumnos.html",controller:"alumnosCtrl"}).when("/asignatura/:idAsignatura/:guidAlumno",{templateUrl:"views/asignatura.html",controller:"asignaturaCtrl"}).when("/asignaturas",{templateUrl:"views/asignaturas.html",controller:"asignaturasCtrl"}).when("/adm_asignatura/:idAsignatura/:idCurso",{templateUrl:"views/adm_asignatura.html",controller:"admAsignaturaCtrl"}).when("/asignaturas_adm",{templateUrl:"views/asignaturas_adm.html",controller:"asignaturasAdmCtrl"}).when("/calificar-tarea/:idTarea",{templateUrl:"views/calificar-tarea.html",controller:"calificarTareaCtrl"}).when("/calificar-evaluacion/:idEvaluacion",{templateUrl:"views/calificar-evaluacion.html",controller:"calificarEvaluacionCtrl"}).when("/calificar-promedio/:idAsignatura",{templateUrl:"views/calificar-promedio.html",controller:"calificarPromedioCtrl"}).when("/acudientes",{templateUrl:"views/acudientes.html",controller:"acudientesCtrl"}).when("/cronograma_adm",{templateUrl:"views/cronograma_adm.html",controller:"cronogramaAdmCtrl"}).when("/galerias_adm",{templateUrl:"views/galerias_adm.html",controller:"galeriasAdmCtrl"}).when("/galeria_adm/:id",{templateUrl:"views/galeria_adm.html",controller:"galeriaAdmCtrl"}).when("/curso_adm/:idCurso",{templateUrl:"views/curso_adm.html",controller:"cursoAdmCtrl"}).when("/app_adm",{templateUrl:"views/app_adm.html",controller:"appAdmCtrl"}).otherwise({redirectTo:"/"})}]),app.controller("appCtrl",["$scope","$http","$cookies","$location","auth",function(a,b,c,d,e){a.loggedIn=c.get("logued"),a.logued=function(b){a.loggedIn=c.get("logued"),a.callAvatar(),a.callRol(),e.setAuth(a.loggedIn),"3"===b?d.path("/perfil_edit/"+a.loggedIn):d.path("/dashboard/"+a.loggedIn)},a.logout=function(){a.loggedIn="",c.put("logued",""),d.path("/login")},a.callAvatar=function(){b.post("servicios/avatar.php",{guid:c.get("logued")}).success(function(b){return""!==b?(a.avatar=b[0].avatar,!0):void 0}).error(function(){a.user="Error: No hay Datos"})},a.callRol=function(){b.post("servicios/rol.php",{guid:c.get("logued")}).success(function(b){return a.rol=b[0].rol,a.rol}).error(function(){a.rol=0})}}]),app.controller("homeCtrl",["$scope",function(a){}]),app.controller("headerCtrl",["$scope","$cookies",function(a,b){b.get("logued")&&""!==b.get("logued")&&a.callAvatar()}]),app.controller("footerCtrl",["$scope",function(a){}]),app.controller("nosotrosCtrl",["$scope","$http",function(a,b){a.initContenido=function(){a.errorCont="",b.post("servicios/readContenido.php").success(function(b){b.error?a.errorCont=b.error:(a.institucional=b.institucional,a.mision=b.mision,a.vision=b.vision,a.servicios=b.servicios)}).error(function(){a.error="Error: No hay Datos"})},a.initContenido()}]),app.controller("cronogramaCtrl",["$scope","$http",function(a,b){a.initEventos=function(){b.post("servicios/readEventos.php").success(function(b){b.error?a.error=b.error:a.eventos=b}).error(function(){a.error="Error: No hay Datos"})},a.initEventos()}]),app.controller("docentesCtrl",["$scope",function(a){}]),app.controller("galeriaCtrl",["$scope","$http",function(a,b){a.initGalerias=function(){b.post("servicios/readGallery.php").success(function(b){b.error?a.error=b.error:a.galerias=b})},a.initGalerias()}]),app.controller("loginCtrl",["$scope","$location","$http","$cookies",function(a,b,c,d){a.login=function(){a.error="",a.email&&a.password?c.post("servicios/login.php",{email:a.email,password:a.password}).success(function(b){if(b.error)a.error=b.error;else{var c=b.guid,e=b.rol;d.put("logued",c),a.callAvatar(),a.logued(e)}}).error(function(b,c){a.errors.push(c)}):(a.error="Por favor ingrese los datos",a.login=!1)}}]),app.controller("eventoCtrl",["$scope","$routeParams","$http",function(a,b,c){var d=b.idEvento;c.post("servicios/readEvento.php",{id:d}).success(function(b){b.error?a.error=b.error:(a.titulo=b.titulo,a.fecha=b.fecha,a.hora=b.hora,a.foto=b.foto,a.lugar=b.lugar,a.descripcion=b.descripcion)})}]),app.controller("albumCtrl",["$scope","$routeParams","$http",function(a,b,c){var d=b.idAlbum;a.initPhotos=function(){c.post("servicios/readPhotos.php",{id:d}).success(function(b){b.error?a.error=b.error:a.photos=b}),c.post("servicios/readGaleria.php",{id:d}).success(function(b){b.error?a.error=b.error:a.galeria=b})},a.initPhotos()}]),app.controller("dashboardCtrl",["$scope","$http","$routeParams","$cookies",function(a,b,c,d){var e=d.get("logued");if(e)if(e===c.idUser){a.callRol();var f=e}else a.logout();else a.logout();a.initCounts=function(){a.error="",f?b.post("servicios/readCounts.php",{id:f}).success(function(b){b.error?a.error=b.error:(a.events=b.events,a.father=b.father,a.owner_photos=b.owner_photos,a.photos=b.photos,a.student=b.student,a.teacher=b.teacher)}).error(function(){a.error="Error: No hay Datos"}):a.logout()},a.initCounts(),a.students=function(){f?b.post("servicios/readAlumnsForAcudient.php",{guid:f}).success(function(b){if(b.error)a.error=b.error;else{a.alumnos=b,a.edad=function(a){return fecha=new Date(a),hoy=new Date,ed=parseInt((hoy-fecha)/365/24/60/60/1e3),ed};for(var c=0;c<b.length;c++){var d=a.alumnos[c],e=b[c];d.nacimiento=a.edad(e.nacimiento)}}}).error(function(){a.error="Error: No hay Datos"}):a.logout()}}]),app.controller("docentesAdmCtrl",["$scope","$mdDialog","$mdMedia","person","$http","$cookies",function(a,b,c,d,e,f){var g=f.get("logued");g||a.logout();var h;a.openMenu=function(a,b){h=b,a(b)},a.addTeacher=function(c,e){d.setPerson(e),b.show({controller:"addPersonCtrl",templateUrl:"views/add_person.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initDocentes()},function(){a.initDocentes()})},a.initDocentes=function(){e.post("servicios/readDocentes.php").success(function(b){if(b.error)a.error=b.error;else{a.docentes=b,a.edad=function(a){return fecha=new Date(a),hoy=new Date,ed=parseInt((hoy-fecha)/365/24/60/60/1e3),ed};for(var c=0;c<b.length;c++){var d=a.docentes[c],e=b[c];d.nombres=e.nombres,d.apellidos=e.apellidos,d.edad=a.edad(e.nacimiento)}}}).error(function(){a.misEmpresas="Error: No hay Datos"})},a.initDocentes()}]),app.controller("perfilEditCtrl",["$scope","$routeParams","$http","person","$mdDialog","$timeout","$cookies",function(a,b,c,d,e,f,g){a.guid=b.guid,a.tipoDoc=[{name:"T.I."},{name:"C.C."}],a.getRolSession=function(){c.post("servicios/rol.php",{guid:g.get("logued")}).success(function(b){a.rolSession=b[0].rol}).error(function(){a.rol=0})},a.initPerson=function(){c.post("servicios/readPerson.php",{guid:a.guid}).success(function(b){b.error?a.error=b.error:(a.nombres=b.nombres,a.apellidos=b.apellidos,a.avatar=b.avatar,a.celular=b.celular,a.telefono=b.telefono,a.email=b.email,a.genero=b.genero,a.nacimiento=b.nacimiento,a.rol=b.rol,a.id=b.id,a.documento=b.documento,a.escivil=b.escivil,a.direccion=b.direccion,a.curso=b.curso,a.grado=b.grado,a.codigo=b.codigo,a.myCroppedImage="")}).error(function(){a.error="Error: No hay Datos"})},a.initAcudientes=function(){c.post("servicios/readAcudientesForStudent.php",{guid:a.guid}).success(function(b){b.error?a.error=b.error:a.acudientes=b}).error(function(){a.error="Error: No hay Datos"})},a.initAlumnos=function(){c.post("servicios/readAlumnsForAcudient.php",{guid:a.guid}).success(function(b){b.error?a.error=b.error:a.alumnos=b}).error(function(){a.error="Error: No hay Datos"})},a.initAcademicAd=function(){c.post("servicios/readAcademicAdults.php",{guid:a.guid}).success(function(b){b.error?a.error=b.error:(a.nivel_academico=b.nivel_academico,a.programa_academico=b.programa_academico,a.institucion=b.institucion,a.fecha_grado=new Date(b.fecha_grado),a.titulo=b.titulo,a.idAcademicAd=b.id)}).error(function(){a.error="Error: No hay Datos"})},a.initAcademicAlumno=function(){c.post("servicios/readAsignaturasByAlumno.php",{guid:a.guid}).success(function(b){b.error?a.error=b.error:a.asignaturas=b}).error(function(){a.error="Error: No hay Datos"})},a.initLaboralAd=function(){c.post("servicios/readLaboralAdults.php",{guid:a.guid}).success(function(b){b.error?a.error=b.error:(a.nombre_empresa=b.nombre_empresa,a.cargo=b.cargo,a.funcion=b.funcion,a.fecha_inicio=new Date(b.fecha_inicio),a.fecha_fin=new Date(b.fecha_fin),a.idLaboralAd=b.id)}).error(function(){a.error="Error: No hay Datos"})},a.initInfoMedica=function(){c.post("servicios/readInfoMedica.php",{guid:a.guid}).success(function(b){b.error?a.error=b.error:(a.altura=b.altura,a.peso=b.peso,a.rh=b.rh,a.eps=b.eps,a.clinica=b.clinica,a.medico=b.medico,a.telefono_medico=b.telefono_medico,a.observaciones=b.observaciones,a.nombre_contacto=b.nombre_contacto,a.telefono_contacto=b.telefono_contacto,a.idinfoMedica=b.id)}).error(function(){a.error="Error: No hay Datos"})},a.getRolSession(),a.initPerson(),a.initAcudientes(),a.initAcademicAd(),a.initAcademicAlumno(),a.initLaboralAd(),a.initInfoMedica(),a.initAlumnos(),a.readCursos=function(){c.post("servicios/readCursos.php").success(function(b){b.error?a.error=b.error:a.cursos=b})},a.readCursos(),a.addFather=function(b,c){d.setPerson(c),e.show({controller:"chooseFatherCtrl",templateUrl:"views/choose_father.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initPerson(),a.initAcudientes()},function(){a.initPerson(),a.initAcudientes()})},a.addAlumno=function(b,c){d.setPerson(c),e.show({controller:"chooseAlumnoCtrl",templateUrl:"views/choose_alumno.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initPerson(),a.initAlumnos()},function(){a.initPerson(),a.initAlumnos()})},a.deleteFather=function(b){c.post("servicios/deleteFatherByStudent.php",{guid_student:a.guid,guid_father:b}).success(function(b){b.error?a.error=b.error:a.initAcudientes()})},a.deleteAlumno=function(b){c.post("servicios/deleteAlumnoByFather.php",{guid_father:a.guid,guid_student:b}).success(function(b){b.error?a.error=b.error:a.initAlumnos()})},a.updateUser=function(){a.successUpdDatosPersonales="",a.telefono=a.telefono?a.telefono:"",a.celular=a.celular?a.celular:"",a.escivil=a.escivil?a.escivil:"",a.direccion=a.direccion?a.direccion:"",a.nombres&&a.documento&&a.email&&a.apellidos?c.post("servicios/updUser.php",{guid:a.guid,nombres:a.nombres,documento:a.documento,telefono:a.telefono,celular:a.celular,email:a.email,apellidos:a.apellidos,escivil:a.escivil,direccion:a.direccion,grado:a.grado,rol:a.rol}).success(function(b){b.error?a.error=b.error:(a.initPerson(),a.successUpdDatosPersonales="Se actualizaron los datos correctamente")}):a.errUser="Diligencie todos los campos obligatorios"},a.updAcademicAdult=function(b){b?c.post("servicios/updAcademicAdult.php",{id:b,nivel_academico:a.nivel_academico,institucion:a.institucion,programa_academico:a.programa_academico,fecha_grado:a.fecha_grado,titulo:a.titulo}).success(function(b){b.error?a.error=b.error:console.log("Se actualizaron los datos")}):c.post("servicios/insertAcademicAdult.php",{guid:a.guid,nivel_academico:a.nivel_academico,institucion:a.institucion,programa_academico:a.programa_academico,fecha_grado:a.fecha_grado,titulo:a.titulo}).success(function(b){b.error&&(a.error=b.error)})},a.updLaboralAdult=function(b){b?c.post("servicios/updLaboralAdult.php",{id:b,nombre_empresa:a.nombre_empresa,cargo:a.cargo,fecha_inicio:a.fecha_inicio,fecha_fin:a.fecha_fin,funcion:a.funcion}).success(function(b){b.error?a.error=b.error:console.log("Se actualizaron los datos")}):c.post("servicios/insertLaboralAdult.php",{guid:a.guid,nombre_empresa:a.nombre_empresa,cargo:a.cargo,fecha_inicio:a.fecha_inicio,fecha_fin:a.fecha_fin,funcion:a.funcion}).success(function(b){b.error&&(a.error=b.error)})},a.updInfoMedica=function(b){b?c.post("servicios/updInfoMedica.php",{id:b,altura:a.altura,peso:a.peso,rh:a.rh,eps:a.eps,clinica:a.clinica,medico:a.medico,telefono_medico:a.telefono_medico,observaciones:a.observaciones,nombre_contacto:a.nombre_contacto,telefono_contacto:a.telefono_contacto}).success(function(b){b.error?a.error=b.error:console.log("Se actualizaron los datos")}):c.post("servicios/insertInfoMedica.php",{guid:a.guid,altura:a.altura,peso:a.peso,rh:a.rh,eps:a.eps,clinica:a.clinica,medico:a.medico,telefono_medico:a.telefono_medico,observaciones:a.observaciones,nombre_contacto:a.nombre_contacto,telefono_contacto:a.telefono_contacto}).success(function(b){b.error&&(a.error=b.error)})},a.myImage="",a.myCroppedImage="";var h=function(b){var c=b.currentTarget.files[0],d=new FileReader;d.onload=function(b){a.$apply(function(a){a.myImage=b.target.result})},d.readAsDataURL(c),a.updAvatar()};angular.element(document.querySelector("#fileInput")).on("change",h),a.updAvatar=function(){f(function(){c.post("servicios/updAvatar.php",{avatar:a.myCroppedImage,guid:a.guid}).success(function(b){b?b.error?a.avError=b.error:(a.avError="",a.avSucces="Has actualizado tu Avatar",a.callAvatar()):a.avError="No se actualizaron los Datos"})},500)}}]),app.controller("addPersonCtrl",["$scope","$mdDialog","person","guid","$http",function(a,b,c,d,e){a.cancel=function(){b.cancel()},a.typePerson=c.getPerson(),d=d.createGuid(),a.addPerson=function(b){a.error="";var c=!0,f=!0,g=0;g="Alumno"===b?3:"Docente"===b?2:"Acudiente"===b?4:0,"Alumno"===b&&(a.grado&&a.codigo||(c=!1),a.email||(a.email="")),"Alumno"!==b&&(a.grado="",a.codigo="",a.email||(f=!1)),isValidEmail=function(a){return/^\w+([\.\+\-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(a)},a.nombres&&a.apellidos&&a.Fnacimiento&&a.genero&&f&&c&&d?(a.pass=Math.random().toString(36).slice(-8),""===a.email||isValidEmail(a.email)?e.post("servicios/insertPerson.php",{rol:g,nombres:a.nombres,apellidos:a.apellidos,Fnacimiento:a.Fnacimiento,genero:a.genero,email:a.email,grado:a.grado,guid:d,pass:a.pass,codigo:a.codigo}).success(function(c){c.error?a.error=c.error:a.success="El "+b+" se creó correctamente"}):a.error="El Email es incorrecto"):a.error="Todos los campos son obligatorios"},a.readCursos=function(){e.post("servicios/readCursos.php").success(function(b){b.error?a.error=b.error:a.cursos=b})},a.readCursos()}]),app.controller("alumnosCtrl",["$scope","$mdDialog","$mdMedia","person","$http",function(a,b,c,d,e){var f;a.openMenu=function(a,b){f=b,a(b)},a.addTeacher=function(c,e){d.setPerson(e),b.show({controller:"addPersonCtrl",templateUrl:"views/add_person.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initAlumnos()},function(){a.initAlumnos()})},a.initAlumnos=function(){e.post("servicios/readAlumnos.php").success(function(b){b.error?a.error=b.error:a.alumnos=b}).error(function(){a.error="Error: No hay Datos"})},a.initAlumnos(),a.readCursos=function(){e.post("servicios/readCursos.php").success(function(b){b.error?a.error=b.error:a.cursos=b})},a.readCursos()}]),app.controller("asignaturaCtrl",["$scope","$mdMedia","$mdDialog","person","$routeParams","$http",function(a,b,c,d,e,f){a.idAsignatura=e.idAsignatura,a.guidAlumno=e.guidAlumno,a.openMenu=function(a,b){originatorEv=b,a(b)},a.edit=function(b,e){d.setPerson(e),c.show({controller:"editNoteCtrl",templateUrl:"views/edit_note.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initInfo()},function(){a.initInfo()})},a.initInfo=function(){f.post("servicios/readAsignaturaByStudent.php",{idAsignatura:a.idAsignatura,guidAlumno:a.guidAlumno}).success(function(b){b.error?a.error=b.error:(a.avatarAlumno=b.avatarAlumno,a.generoAlumno=b.generoAlumno,a.nombresAlumno=b.nombresAlumno,a.cursoAlumno=b.cursoAlumno,a.nombreAsignatura=b.nombreAsignatura,a.tareas=b.tareas,a.evaluaciones=b.evaluaciones)})},a.initInfo()}]),app.controller("asignaturasCtrl",["$scope","$cookies","$http",function(a,b,c){var d=b.get("logued");d?a.guidDocente=d:a.logout(),a.initAsignaturas=function(){c.post("servicios/readAsignaturasByTeacher.php",{guidDocente:a.guidDocente}).success(function(b){b.error?a.error=b.error:a.asignaturas=b})},a.initAsignaturas()}]),app.controller("asignaturasAdmCtrl",["$scope","$mdDialog","$mdMedia","$http","person",function(a,b,c,d,e){var f;a.openMenu=function(a,b){f=b,a(b)},a.addCurso=function(c){b.show({controller:"addCursoCtrl",templateUrl:"views/add_curso.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initCursos()},function(){a.initCursos()})},a.editCurso=function(c,d){e.setPerson(d),b.show({controller:"editCursoCtrl",templateUrl:"views/edit_curso.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initCursos()},function(){a.initCursos()})},a.initCursos=function(){d.post("servicios/readCursos.php").success(function(b){b.error?a.error=b.error:a.cursos=b})},a.initCursos()}]),app.controller("editNoteCtrl",["$scope","$mdDialog","person",function(a,b,c){a.cancel=function(){b.cancel()},a.typeEdit=c.getPerson()}]),app.controller("admAsignaturaCtrl",["$scope","$mdMedia","$mdDialog","person","$routeParams","$http",function(a,b,c,d,e,f){a.idAsignatura=e.idAsignatura,a.idCurso=e.idCurso,a.openMenu=function(a,b){originatorEv=b,a(b)},a.addTarea=function(b,e){d.setPerson(e),c.show({controller:"addTareaCtrl",templateUrl:"views/add_tarea.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initTareas()},function(){a.initTareas()})},a.addEvaluacion=function(b,e){d.setPerson(e),c.show({controller:"addEvaluacionCtrl",templateUrl:"views/add_evaluacion.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initEvaluaciones()},function(){a.initEvaluaciones()})},a.editTarea=function(b,e){d.setPerson(e),c.show({controller:"editTareaCtrl",templateUrl:"views/edit_tarea.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initTareas()},function(){a.initTareas()})},a.editEvaluacion=function(b,e){d.setPerson(e),c.show({controller:"editEvaluacionCtrl",templateUrl:"views/edit_evaluacion.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initEvaluaciones()},function(){a.initEvaluaciones()})},a.state="Al",a.setState=function(b){a.state=b},a.initAlumnos=function(){f.post("servicios/readAlumnosByCurso.php",{idCurso:a.idCurso}).success(function(b){b.error?a.error=b.error:a.alumnos=b})},a.readCurso=function(){f.post("servicios/readCurso.php",{id:a.idCurso}).success(function(b){b.error?a.error=b.error:a.curso=b.name})},a.readAsignatura=function(){f.post("servicios/readAsignatura.php",{id:a.idAsignatura}).success(function(b){b.error?a.error=b.error:a.asignatura=b.asignaturaName})},a.initTareas=function(){f.post("servicios/readTareas.php",{id:a.idAsignatura}).success(function(b){if(b.error)a.error=b.error;else{a.tareas=b;for(var c=0;c<b.length;c++){var d=a.tareas[c],e=b[c];"1"===e.publica?d.publica=!0:d.publica=!1}}})},a.initEvaluaciones=function(){f.post("servicios/readEvaluaciones.php",{id:a.idAsignatura}).success(function(b){if(b.error)a.error=b.error;else{a.evaluaciones=b;for(var c=0;c<b.length;c++){var d=a.evaluaciones[c],e=b[c];"1"===e.publica?d.publica=!0:d.publica=!1}}})},a.initAlumnos(),a.readCurso(),a.readAsignatura(),a.initTareas(),a.initEvaluaciones(),a.updPublica=function(a,b){b=b===!0?1:0,f.post("servicios/updTareaPublica.php",{idTarea:a,state:b}).success(function(a){})},a.updEvPublica=function(a,b){b=b===!0?1:0,f.post("servicios/updEvaluacionPublica.php",{idEvaluacion:a,state:b}).success(function(a){})},a.deleteTarea=function(b,d){var e=c.confirm().title("Quieres Eliminar esta Tarea?").textContent("Si la eliminas, se perderá los datos de calificaciones asociados a esta tarea").ariaLabel("Lucky day").targetEvent(b).ok("ELIMINAR").cancel("CANCELAR");c.show(e).then(function(){f.post("servicios/deleteTarea.php",{id:d}).success(function(b){a.initTareas()})},function(){})},a.deleteEvaluacion=function(b,d){var e=c.confirm().title("Quieres Eliminar esta Evaluacion?").textContent("Si la eliminas, se perderá los datos de calificaciones asociados a esta evaluacion").ariaLabel("Lucky day").targetEvent(b).ok("ELIMINAR").cancel("CANCELAR");c.show(e).then(function(){f.post("servicios/deleteEvaluacion.php",{id:d}).success(function(b){a.initEvaluaciones()})},function(){})}}]),app.controller("editTareaCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.idTarea=c.getPerson(),a.initTarea=function(){d.post("servicios/readTarea.php",{idTarea:a.idTarea}).success(function(b){b.error?a.error=b.error:(a.titulo=b.titulo,a.descripcion=b.descripcion,a.entrega=new Date(b.entrega),a.porcentaje=b.porcentaje,"1"===b.publica?a.publica=!0:a.publica=!1,a.calificable=b.calificable,a.id_asignatura=b.id_asignatura)})},a.initTarea(),a.updTarea=function(){a.publica||(a.publica=0),d.post("servicios/updTarea.php",{idTarea:a.idTarea,titulo:a.titulo,descripcion:a.descripcion,entrega:a.entrega,porcentaje:0,publica:a.publica,calificable:a.calificable}).success(function(c){c.error?a.error=c.error:b.cancel()})}}]),app.controller("calificarTareaCtrl",["$scope","$routeParams","$http","$cookies",function(a,b,c,d){a.idTarea=b.idTarea;var e=d.get("logued");e||a.logout(),a.initCalificaciones=function(){a.error="",c.post("servicios/readCalficarTarea.php",{idTarea:a.idTarea,guid_docente:e}).success(function(b){b.error?a.error=b.error:(a.nameAsignatura=b.nameAsignatura,a.nameCurso=b.nameCurso,a.tituloTarea=b.tituloTarea,a.alumnos=b.students)})},a.initCalificaciones(),a.updNota=function(b,d,e){a.error="",a.errorNota="",10>=e?c.post("servicios/updNota.php",{idTarea:b,guid_alumno:d,nota:e}).success(function(b){b.error?a.error=b.error:console.log(b)}):a.errorNota="La nota no puede ser mayor a 10, para decimales, asegurese usar el punto, ej: 7.8"},a.updObservacion=function(b,d,e){a.error="",c.post("servicios/updObservacion.php",{idTarea:b,guid_alumno:d,observaciones:e}).success(function(b){b.error?a.error=b.error:console.log(b)})}}]),app.controller("calificarEvaluacionCtrl",["$scope","$routeParams","$http","$cookies",function(a,b,c,d){a.idEvaluacion=b.idEvaluacion;var e=d.get("logued");e||a.logout(),a.initCalificaciones=function(){a.error="",c.post("servicios/readCalficarEvaluacion.php",{idEvaluacion:a.idEvaluacion,guid_docente:e}).success(function(b){b.error?a.error=b.error:(a.nameAsignatura=b.nameAsignatura,a.nameCurso=b.nameCurso,a.tituloEvaluacion=b.tituloEvaluacion,a.alumnos=b.students)})},a.initCalificaciones(),a.updNota=function(b,d,e){a.error="",a.errorNota="",10>=e?c.post("servicios/updNotaEvaluacion.php",{idEvaluacion:b,guid_alumno:d,nota:e}).success(function(b){b.error?a.error=b.error:console.log(b)}):a.errorNota="La nota no puede ser mayor a 10, para decimales, asegurese usar el punto, ej: 7.8"},a.updObservacion=function(b,d,e){a.error="",c.post("servicios/updObservacionEvaluacion.php",{idEvaluacion:b,guid_alumno:d,observaciones:e}).success(function(b){b.error?a.error=b.error:console.log(b)})}}]),app.controller("calificarPromedioCtrl",["$scope","$routeParams","$http","$cookies",function(a,b,c,d){a.idAsignatura=b.idAsignatura;var e=d.get("logued");e||a.logout(),a.initCalificaciones=function(){a.error="",c.post("servicios/readCalficarAsignatura.php",{idAsignatura:a.idAsignatura,guid_docente:e}).success(function(b){b.error?a.error=b.error:(a.nameAsignatura=b.nameAsignatura,a.nameCurso=b.nameCurso,a.alumnos=b.students)})},a.initCalificaciones(),a.updNota=function(b,d,e){a.error="",a.errorNota="",10>=e?c.post("servicios/updNotaAsignatura.php",{idAsignatura:b,guid_alumno:d,nota:e}).success(function(b){b.error?a.error=b.error:console.log(b)}):a.errorNota="La nota no puede ser mayor a 10, para decimales, asegurese usar el punto, ej: 7.8"}}]),app.controller("acudientesCtrl",["$scope","$mdDialog","$mdMedia","person","$http",function(a,b,c,d,e){var f;a.openMenu=function(a,b){f=b,a(b)},a.addAcudiente=function(c,e){d.setPerson(e),b.show({controller:"addPersonCtrl",templateUrl:"views/add_person.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initAcudientes()},function(){a.initAcudientes()})},a.initAcudientes=function(){e.post("servicios/readAcudientes.php").success(function(b){b.error?a.error=b.error:a.acudientes=b}).error(function(){a.error="Error: No hay Datos"})},a.initAcudientes()}]),app.controller("cronogramaAdmCtrl",["$scope","$mdDialog","$mdMedia","person","$http",function(a,b,c,d,e){var f;a.openMenu=function(a,b){f=b,a(b)},a.addEvent=function(c,e){d.setPerson(e),b.show({controller:"addEventCtrl",templateUrl:"views/add_event.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initEventos()},function(){a.initEventos()})},a.editEvent=function(c,e){d.setPerson(e),b.show({controller:"editEventCtrl",templateUrl:"views/edit_event.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initEventos()},function(){a.initEventos()})},a.deleteEvent=function(c,d){var f=b.confirm().title("Quieres Borrar el Evento?").textContent("Este Evento se borrrá para siempre").ariaLabel("Lucky day").targetEvent(c).ok("ELIMINAR").cancel("CANCELAR");b.show(f).then(function(){e.post("servicios/deleteEvent.php",{idEvento:d}).success(function(b){a.initEventos()})},function(){})},a.initEventos=function(){e.post("servicios/readEventos.php").success(function(b){b.error?a.error=b.error:a.eventos=b}).error(function(){a.error="Error: No hay Datos"})},a.initEventos()}]),app.controller("addEventCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.typePerson=c.getPerson(),a.addEvent=function(){if(a.error="","Crear"===a.typePerson)if(a.titulo,a.fecha,a.hora,a.lugar,a.imgEvent,a.descripcion){var b="",c="",e=0;if(a.imgEvent&&(b=a.imgEvent),""!==b){var f=new Image;f.src=b,f.addEventListener("load",function(){width=f.width,height=f.height}),c=11===a.imgEvent.indexOf("jpg")?"jpg":11===a.imgEvent.indexOf("jpeg")?"jpeg":11===a.imgEvent.indexOf("png")?"png":11===a.imgEvent.indexOf("gif")?"gif":0,0!==c?600===f.width&&400===f.height?e=1:(a.error="El tamaño de la imágen debe ser de 600px x 400px",a.imgEvent="",b=""):(a.error="Formato de la imágen Inválido",a.imgEvent="",b="")}1===e&&d.post("servicios/insertEvent.php",{titulo:a.titulo,fecha:a.fecha,hora:a.hora,lugar:a.lugar,imagen:b,format:c,descripcion:a.descripcion}).success(function(b){b.error?a.error=b.error:a.success="El Evento se creó correctamente"})}else a.error="Todos los campos son obligatorios"}}]),app.controller("addPhotoCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.typePerson=c.getPerson(),a.uploadPhoto=function(){if(a.error="",a.photo&&a.descripcion){var b="",c="",e=0;if(a.photo&&(b=a.photo),""!==b){var f=new Image;f.src=b,f.addEventListener("load",function(){width=f.width,height=f.height}),c=11===a.photo.indexOf("jpg")?"jpg":11===a.photo.indexOf("jpeg")?"jpeg":11===a.photo.indexOf("png")?"png":11===a.photo.indexOf("gif")?"gif":0,0!==c?f.width<=1024&&f.height<=850?e=1:(a.error="El tamaño de la imágen es muy grande",a.photo="",b=""):(a.error="Formato de la imágen Inválido",a.photo="",b="")}1===e&&d.post("servicios/uploadPhoto.php",{imagen:b,format:c,descripcion:a.descripcion,idGaleria:a.typePerson}).success(function(b){b.error?a.error=b.error:a.success="La foto se agregó correctamente"})}else a.error="Todos los campos son obligatorios"}}]),app.controller("addPeriodoCtrl",["$scope","$mdDialog","person",function(a,b,c){a.cancel=function(){b.cancel()},a.typePerson=c.getPerson()}]),app.controller("galeriasAdmCtrl",["$scope","$mdDialog","$mdMedia","person","$http",function(a,b,c,d,e){var f;a.openMenu=function(a,b){f=b,a(b)},a.addGallery=function(c,e){d.setPerson(e),b.show({controller:"addGaleriaCtrl",templateUrl:"views/add_galeria.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initGalerias()},function(){a.initGalerias()})},a.editGallery=function(c,e){d.setPerson(e),b.show({controller:"editGaleriaCtrl",templateUrl:"views/edit_galeria.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initGalerias()},function(){a.initGalerias()})},a.deleteGallery=function(c,d){var f=b.confirm().title("Quieres Eliminar la Galería?").textContent("Si la eliminas, se perderán todas las fotos que tienes dentro de esta galería").ariaLabel("Lucky day").targetEvent(c).ok("ELIMINAR").cancel("CANCELAR");b.show(f).then(function(){e.post("servicios/deleteGallery.php",{idGallery:d}).success(function(b){a.initGalerias()})},function(){})},a.initGalerias=function(){e.post("servicios/readGallery.php").success(function(b){b.error?a.error=b.error:a.galerias=b})},a.initGalerias()}]),app.controller("galeriaAdmCtrl",["$scope","$mdDialog","$mdMedia","person","$routeParams","$http",function(a,b,c,d,e,f){var g,h=e.id;a.openMenu=function(a,b){g=b,a(b)},a.addPhoto=function(c,e){d.setPerson(e),b.show({controller:"addPhotoCtrl",templateUrl:"views/add_photo.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(b){a.initPhotos()},function(){a.initPhotos()})},a.initPhotos=function(){f.post("servicios/readPhotos.php",{id:h}).success(function(b){b.error?a.error=b.error:a.photos=b}),f.post("servicios/readGaleria.php",{id:h}).success(function(b){b.error?a.error=b.error:a.galeria=b})},a.initPhotos()}]),app.controller("addGaleriaCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.typePerson=c.getPerson(),a.addGallery=function(){a.error="","Crear"===a.typePerson&&(a.titulo&&a.descripcion?d.post("servicios/insertGallery.php",{titulo:a.titulo,descripcion:a.descripcion}).success(function(b){b.error?a.error=b.error:a.success="La galería se creó correctamente"}):a.error="Todos los campos son obligatorios")}}]),app.controller("editEventCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.typePerson=c.getPerson(),a.editEvent=function(){if(a.error="",a.success="",a.titulo&&a.fecha&&a.hora&&a.lugar&&a.descripcion){var b="",c="",e=0;if(a.imgEvent&&(b=a.imgEvent),""!==b){var f=new Image;f.src=b,f.addEventListener("load",function(){width=f.width,height=f.height}),c=11===a.imgEvent.indexOf("jpg")?"jpg":11===a.imgEvent.indexOf("jpeg")?"jpeg":11===a.imgEvent.indexOf("png")?"png":11===a.imgEvent.indexOf("gif")?"gif":0,0!==c?600===f.width&&400===f.height?e=1:(a.error="El tamaño de la imágen debe ser de 600px x 400px",a.imgEvent="",b=""):(a.error="Formato de la imágen Inválido",a.imgEvent="",b="")}d.post("servicios/updEvent.php",{titulo:a.titulo,fecha:a.fecha,hora:a.hora,lugar:a.lugar,imagen:b,format:c,descripcion:a.descripcion,id:a.typePerson}).success(function(b){"true"===b?a.success="El Evento se editó correctamente":a.error="No se pudo editar el Evento"})}else a.error="Todos los campos son obligatorios"},d.post("servicios/readEvento.php",{id:a.typePerson}).success(function(b){b.error?a.error=b.error:(a.titulo=b.titulo,a.hora=b.hora,a.lugar=b.lugar,a.descripcion=b.descripcion)})}]),app.controller("appAdmCtrl",["$scope","$mdMedia","$mdDialog","person","$http",function(a,b,c,d,e){
a.openMenu=function(a,b){originatorEv=b,a(b)},a.edit=function(b,e){d.setPerson(e),c.show({controller:"addPeriodoCtrl",templateUrl:"views/add_periodo.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.status='You said the information was "'+b+'".'},function(){a.status="You cancelled the dialog."})},a.initContenido=function(){a.errorCont="",e.post("servicios/readContenido.php").success(function(b){b.error?a.errorCont=b.error:(a.institucional=b.institucional,a.mision=b.mision,a.vision=b.vision,a.servicios=b.servicios,a.year=b.year)}).error(function(){a.error="Error: No hay Datos"})},a.updContenido=function(){a.errorCont="",a.institucional&&a.mision&&a.vision&&a.servicios?e.post("servicios/updContenido.php",{institucional:a.institucional,mision:a.mision,vision:a.vision,servicios:a.servicios}).success(function(b){b.error?a.errorCont=b.error:a.successCon="Los Datos se actualizaron correctamente"}):a.errorCont="Todos los datos son obligatorios"},a.initContenido(),a.updYear=function(){e.post("servicios/updYear.php",{year:a.year}).success(function(b){b.error?a.errorCont=b.error:a.successYear="Los Datos se actualizaron correctamente"})}}]),app.controller("editGaleriaCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.typePerson=c.getPerson(),a.editGaleria=function(){a.error="",a.success="",a.titulo&&a.descripcion?d.post("servicios/updGallery.php",{titulo:a.titulo,descripcion:a.descripcion,id:a.typePerson}).success(function(b){"true"===b?a.success="La Galería se editó correctamente":a.error="No se pudo editar la Galería"}):a.error="Todos los campos son obligatorios"},d.post("servicios/readGaleria.php",{id:a.typePerson}).success(function(b){b.error?a.error=b.error:(a.id=b.id,a.titulo=b.titulo,a.descripcion=b.descripcion)})}]),app.controller("chooseFatherCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.guid_student=c.getPerson(),d.post("servicios/readAcudientesByStudent.php",{guid_student:a.guid_student}).success(function(b){b.error?a.error=b.error:a.fathers=b}),a.chooseFather=function(c){d.post("servicios/insertFatherByStudent.php",{guid_student:a.guid_student,guid_father:c}).success(function(c){c.error?a.error=c.error:b.cancel()})}}]),app.controller("chooseAlumnoCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.guid_father=c.getPerson(),d.post("servicios/readAlumnosByAcudiente.php",{guid_father:a.guid_father}).success(function(b){b.error?a.error=b.error:a.alumnos=b}),a.chooseAlumno=function(c){d.post("servicios/insertAlumnoByfather.php",{guid_father:a.guid_father,guid_student:c}).success(function(c){c.error?a.error=c.error:b.cancel()})}}]),app.controller("addCursoCtrl",["$scope","$mdDialog","$http",function(a,b,c){a.cancel=function(){b.cancel()},a.insertCurso=function(){a.name?c.post("servicios/insertCurso.php",{name:a.name}).success(function(c){c.error?a.error=c.error:b.cancel()}):a.error="El Campo es obligatorio"}}]),app.controller("editCursoCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.idCurso=c.getPerson(),a.editCurso=function(){a.error="",a.name?d.post("servicios/updCurso.php",{name:a.name,idCurso:a.idCurso}).success(function(c){"true"===c?b.cancel():a.error="No se pudo editar el Evento"}):a.error="El campo nombre no puede estar vacìo"},d.post("servicios/readCurso.php",{id:a.idCurso}).success(function(b){b.error?a.error=b.error:a.name=b.name})}]),app.controller("cursoAdmCtrl",["$scope","$routeParams","$http","person","$mdDialog",function(a,b,c,d,e){a.idCurso=b.idCurso,a.openMenu=function(a,b){originatorEv=b,a(b)},a.initAsignaturas=function(){c.post("servicios/readAsignaturas.php",{id:a.idCurso}).success(function(b){b.error?a.error=b.error:a.asignaturas=b})},a.readNombreCurso=function(){c.post("servicios/readNombreCurso.php",{id:a.idCurso}).success(function(b){b.error?a.error=b.error:a.nombreCurso=b.nombreCurso})},a.initAsignaturas(),a.readNombreCurso(),a.addAsignatura=function(b,c){d.setPerson(c),e.show({controller:"addAsignaturaCtrl",templateUrl:"views/add_asignatura.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initAsignaturas()},function(){a.initAsignaturas()})},a.editAsignatura=function(b,c){d.setPerson(c),e.show({controller:"editAsignaturaCtrl",templateUrl:"views/edit_asignatura.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0}).then(function(b){a.initAsignaturas()},function(){a.initAsignaturas()})},a.deleteAsignatura=function(b,d){var f=e.confirm().title("Quieres Eliminar esta Asignatura?").textContent("Si la eliminas, se perderán todas las tareas, evaluaciones y notas asignadas con esta asignatura").ariaLabel("Lucky day").targetEvent(b).ok("ELIMINAR").cancel("CANCELAR");e.show(f).then(function(){c.post("servicios/deleteAsignatura.php",{id:d}).success(function(b){a.initAsignaturas()})},function(){})}}]),app.controller("addAsignaturaCtrl",["$scope","$mdDialog","$http","person",function(a,b,c,d){a.cancel=function(){b.cancel()},a.idCurso=d.getPerson(),a.year="",a.insertAsignatura=function(){a.asignaturaName&&a.docenteGuid?c.post("servicios/insertAsignatura.php",{name:a.asignaturaName,guid_docente:a.docenteGuid,year:a.year,id_curso:a.idCurso}).success(function(c){c.error?a.error=c.error:b.cancel()}):a.error="Todos los Campos son Obligatorios"},a.readNamesDocentes=function(){c.post("servicios/readDocentes.php").success(function(b){b.error?a.error=b.error:a.docentes=b})},a.readActualYear=function(){c.post("servicios/readActualYear.php").success(function(b){b.error?a.error=b.error:a.year=b.year})},a.readNamesDocentes(),a.readActualYear()}]),app.controller("editAsignaturaCtrl",["$scope","$mdDialog","$http","person",function(a,b,c,d){a.cancel=function(){b.cancel()},a.idAsignatura=d.getPerson(),a.year="",a.editAsignatura=function(){a.asignaturaName&&a.docenteGuid?c.post("servicios/updAsignatura.php",{name:a.asignaturaName,guid_docente:a.docenteGuid,idAsignatura:a.idAsignatura}).success(function(c){c.error?a.error=c.error:b.cancel()}):a.error="Todos los Campos son Obligatorios"},a.readNamesDocentes=function(){c.post("servicios/readDocentes.php").success(function(b){b.error?a.error=b.error:a.docentes=b})},a.readActualYear=function(){c.post("servicios/readActualYear.php").success(function(b){b.error?a.error=b.error:a.year=b.year})},a.readAsignatura=function(){c.post("servicios/readAsignatura.php",{id:a.idAsignatura}).success(function(b){b.error?a.error=b.error:(a.asignaturaName=b.asignaturaName,a.docenteGuid=b.docenteGuid)})},a.readNamesDocentes(),a.readActualYear(),a.readAsignatura()}]),app.controller("addTareaCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.idAsignatura=c.getPerson(),a.addTarea=function(){a.titulo&&a.entrega?(a.publica||(a.publica=0),d.post("servicios/insertTarea.php",{idAsignatura:a.idAsignatura,titulo:a.titulo,descripcion:a.descripcion,entrega:a.entrega,porcentaje:0,publica:a.publica,calificable:a.calificable}).success(function(c){c.error?a.error=c.error:b.cancel()})):a.error="Todos los campos son obligatorios"}}]),app.controller("addEvaluacionCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.idAsignatura=c.getPerson(),a.addEvaluacion=function(){a.titulo&&a.entrega?(a.publica||(a.publica=0),d.post("servicios/insertEvaluacion.php",{idAsignatura:a.idAsignatura,titulo:a.titulo,descripcion:a.descripcion,entrega:a.entrega,porcentaje:0,publica:a.publica}).success(function(c){c.error?a.error=c.error:b.cancel()})):a.error="Todos los campos son obligatorios"}}]),app.controller("editEvaluacionCtrl",["$scope","$mdDialog","person","$http",function(a,b,c,d){a.cancel=function(){b.cancel()},a.idEvaluacion=c.getPerson(),a.initEvaluacion=function(){d.post("servicios/readEvaluacion.php",{idEvaluacion:a.idEvaluacion}).success(function(b){b.error?a.error=b.error:(a.titulo=b.titulo,a.descripcion=b.descripcion,a.entrega=new Date(b.entrega),a.porcentaje=b.porcentaje,"1"===b.publica?a.publica=!0:a.publica=!1,a.id_asignatura=b.id_asignatura)})},a.initEvaluacion(),a.updEvaluacion=function(){a.publica||(a.publica=0),d.post("servicios/updEvaluacion.php",{idEvaluacion:a.idEvaluacion,titulo:a.titulo,descripcion:a.descripcion,entrega:a.entrega,porcentaje:0,publica:a.publica}).success(function(c){c.error?a.error=c.error:b.cancel()})}}]),app.directive("header",function(){return{restrict:"A",templateUrl:"views/header.html",controller:"headerCtrl"}}),app.directive("footer",function(){return{restrict:"A",templateUrl:"views/footer.html",controller:"footerCtrl"}}),app.directive("gallery",function(){return{restrict:"A",link:function(a,b,c){$(".gallery a").simpleLightbox()}}}),app.directive("tabs",function(){return{restrict:"A",link:function(a,b,c){var d=b.find("a");$(d).click(function(a){a.preventDefault(),$(this).tab("show")})}}}),app.directive("backButton",function(){return{restrict:"A",link:function(a,b,c){function d(){history.back(),a.$apply()}b.bind("click",d)}}}),app.directive("fileread",[function(){return{scope:{fileread:"="},link:function(a,b,c){b.bind("change",function(b){var c=new FileReader;c.onload=function(b){a.$apply(function(){a.fileread=b.target.result})},c.readAsDataURL(b.target.files[0])})}}}]),app.service("person",function(){var a;this.setPerson=function(b){return a=b},this.getPerson=function(){return a?a:""}}),app.service("guid",function(){this.createGuid=function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b}}),app.service("auth",function(){var a;this.setAuth=function(b){return a=b},this.getAuth=function(){return a?a:""}});